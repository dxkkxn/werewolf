{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { StatusBar } from 'expo-status-bar';\nimport { useFonts } from 'expo-font';\nimport { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { AvailableGame } from \"./AvailableGame.js\";\nimport { useNavigation } from '@react-navigation/native';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar url = \"http://\" + window.location.hostname + \":3000\";\nexport default function Join(_ref) {\n  var route = _ref.route;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    gameData = _useState2[0],\n    setGameData = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    games = _useState4[0],\n    setGames = _useState4[1];\n  var username = route.params.username;\n  var token = route.params.token;\n  var availableGames = function availableGames(propsArray) {\n    propsArray = JSON.parse(propsArray);\n    return propsArray.map(function (game, index) {\n      if (!game.started) {\n        return _jsx(AvailableGame, {\n          username: username,\n          token: token,\n          gameProps: game\n        }, index);\n      }\n    });\n  };\n  useEffect(function () {\n    if (gameData != null) {\n      setGames(availableGames(gameData));\n    }\n  }, [gameData]);\n  var fetchGames = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var response = yield fetch(url + \"/game\", {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'x-access-token': token\n          }\n        });\n        if (!response.ok) {\n          alert('fetch games failed');\n          throw new Error('failed to fetch games.');\n        }\n        var data = yield response.json();\n        setGameData(data.data);\n      } catch (error) {\n        console.error(error);\n      }\n      ;\n    });\n    return function fetchGames() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    fetchGames();\n  }, []);\n  var _useFonts = useFonts({\n      'Poppins': require(\"../assets/fonts/Poppins-Regular.ttf\")\n    }),\n    _useFonts2 = _slicedToArray(_useFonts, 1),\n    loaded = _useFonts2[0];\n  if (!loaded) {}\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.title,\n      children: \" Rejoindre une partie \"\n    }), _jsx(View, {\n      style: styles.container,\n      children: games\n    })]\n  });\n}\n;\nvar styles = StyleSheet.create({\n  title: {\n    margin: 18,\n    color: '#ffffff',\n    fontSize: 28,\n    fontFamily: 'Poppins'\n  },\n  container: {\n    display: 'flex',\n    width: '100%',\n    flex: 1,\n    height: '90%',\n    backgroundColor: '#371b58',\n    alignItems: 'center',\n    justifyContent: 'space-around'\n  }\n});","map":{"version":3,"names":["StatusBar","useFonts","useState","useEffect","StyleSheet","Text","View","AvailableGame","useNavigation","jsx","_jsx","jsxs","_jsxs","url","window","location","hostname","Join","_ref","route","_useState","_useState2","_slicedToArray","gameData","setGameData","_useState3","_useState4","games","setGames","username","params","token","availableGames","propsArray","JSON","parse","map","game","index","started","gameProps","fetchGames","_ref2","_asyncToGenerator","response","fetch","method","headers","ok","alert","Error","data","json","error","console","apply","arguments","_useFonts","require","_useFonts2","loaded","style","styles","container","children","title","create","margin","color","fontSize","fontFamily","display","width","flex","height","backgroundColor","alignItems","justifyContent"],"sources":["/home/ennouaimi/PROJET/LoupGarouWeb/components/Join.js"],"sourcesContent":["import { StatusBar } from 'expo-status-bar';\nimport { useFonts } from 'expo-font';\nimport {useState, useEffect} from 'react';\nimport { StyleSheet, Text, View } from 'react-native';\nimport {AvailableGame} from './AvailableGame.js'\nimport { useNavigation } from '@react-navigation/native';\nconst url = `http://${window.location.hostname}:3000`\n\n\nexport default function Join({ route }){\n  const [gameData, setGameData] = useState(null);\n  const [games, setGames] = useState(null);\n  const username = route.params.username;\n  const token = route.params.token;\n  const availableGames = (propsArray) => {\n    propsArray = JSON.parse(propsArray);\n    return(\n      propsArray.map((game, index) => {\n        if(!game.started){\n          return (<AvailableGame username={username} token={token} key={index} gameProps={game} />);\n        }\n      }\n    ));\n  };\n\n  useEffect(() => {\n    if(gameData != null){\n      setGames(availableGames(gameData));\n    }\n  }, [gameData]);\n\n  //getting games from db\n  const fetchGames = async () => {\n    try{\n      const response = await fetch(`${url}/game` ,{\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-access-token': token\n        },\n      });\n      if (!response.ok) {\n        alert('fetch games failed');\n        throw new Error('failed to fetch games.');\n      }\n      const data = await response.json();\n      setGameData(data.data);\n    } catch(error){ console.error(error)};\n  };\n  useEffect(() => {\n    fetchGames();\n  }, []);\n\n  const [loaded] = useFonts({\n    'Poppins': require('../assets/fonts/Poppins-Regular.ttf'),\n  });\n  if (!loaded) {\n    // return null;\n  }\n\n    return (\n      <View style={styles.container}>\n        <Text style={styles.title}> Rejoindre une partie </Text>\n        <View style={styles.container}>\n          {games}\n        </View>\n      </View>\n    );\n\n};\n\n\nconst styles = StyleSheet.create({\n  title: {\n    margin: 18,\n    color: '#ffffff',\n    fontSize: 28,\n    fontFamily: 'Poppins'\n  },\n  container: {\n    display: 'flex',\n    width: '100%',\n    flex:1,\n    height: '90%',\n    backgroundColor: '#371b58',\n    alignItems: 'center',\n    justifyContent: 'space-around',\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}